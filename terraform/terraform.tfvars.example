region = "in-maa"
ssh_authorized_keys = [
  "ssh-rsa AAAAB3NzaC1yc2EAAAAD........FlbYQqiKpp2bwvy3TxObIKcMa6d2k= user@blr-mp9vq"
]

# --- New: enable the /share call so nat-a & nat-b can use the IP ---
use_ip_share = true

# Linode DCID for lelastic (in-maa = 25) 
# https://techdocs.akamai.com/cloud-computing/docs/configure-failover-on-a-compute-instance#ip-sharing-availability
dcid = 25

# -----------------------------------------------------------------------------
# Multi-NAT HA Pairs Definition
# -----------------------------------------------------------------------------
# This variable allows defining multiple independent NAT HA pairs for large-scale
# or multi-tenant environments.
#
# If this list is empty, Terraform automatically falls back to the legacy
# single NAT pair variables (nat_a/nat_b).
#
# Each entry in the list represents one HA NAT pair and includes:
#   - name         → unique name for the pair (used for instance labels)
#   - vlan_vip     → floating VLAN IP (the HA virtual gateway address)
#   - shared_ipv4  → public IP shared between the two NAT instances
#   - vlan_label   → VLAN to attach (must exist in the Linode region)
#   - vrrp_id      → unique VRRP Router ID (integer between 1–255)
#   - members[]    → list of 2 nodes (MASTER and BACKUP)
#       • label    → instance label (e.g., "nat1-a", "nat1-b")
#       • vlan_ip  → static VLAN IP assigned to the instance
#       • state    → MASTER or BACKUP (for keepalived)
#       • priority → VRRP priority (higher = more preferred)
#
# Example usage (in terraform.tfvars):
#
# nat_pairs = [
#   {
#     name        = "nat1"
#     vlan_vip    = "192.168.10.1/24"
#     shared_ipv4 = "172.236.90.201"
#     anchor_linode_id  = 86776804
#     vlan_label  = "private-lan-1"
#     vrrp_id     = 51
#     members = [
#       { label = "nat1-a", vlan_ip = "192.168.10.3/24", state = "MASTER", priority = 150 },
#       { label = "nat1-b", vlan_ip = "192.168.10.4/24", state = "BACKUP", priority = 100 }
#     ]
#   },
#   {
#     name        = "nat2"
#     vlan_vip    = "192.168.20.1/24"
#     shared_ipv4 = "172.236.90.202"
#     vlan_label  = "private-lan-2"
#     vrrp_id     = 52
#     members = [
#       { label = "nat2-a", vlan_ip = "192.168.20.3/24", state = "MASTER", priority = 150 },
#       { label = "nat2-b", vlan_ip = "192.168.20.4/24", state = "BACKUP", priority = 100 }
#     ]
#   }
# ]
nat_pairs = [
  {
    name                  = "nat1"
    vlan_vip              = "192.168.1.1/24"
    shared_ipv4           = "172.236.95.221"
    anchor_linode_id      = 86776804
    vlan_label            = "private-lan"
    placement_group_label = "NAT"
    placement_group_type  = "anti_affinity:local"
    vrrp_id               = 51
    members = [
      { label = "nat1-a", vlan_ip = "192.168.1.3/24", state = "MASTER", priority = 150 },
      { label = "nat1-b", vlan_ip = "192.168.1.4/24", state = "BACKUP", priority = 100 }
    ]
  },
  {
    name                  = "nat2"
    vlan_vip              = "192.168.1.10/24"
    shared_ipv4           = "172.236.95.99"
    anchor_linode_id      = 86776806
    vlan_label            = "private-lan"
    placement_group_label = "NAT"
    placement_group_type  = "anti_affinity:local"
    vrrp_id               = 52
    members = [
      { label = "nat2-a", vlan_ip = "192.168.1.6/24", state = "MASTER", priority = 150 },
      { label = "nat2-b", vlan_ip = "192.168.1.7/24", state = "BACKUP", priority = 100 }
    ]
  }
]
